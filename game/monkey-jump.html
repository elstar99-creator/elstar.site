<!doctype html>

<html lang="id">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Monkey Jump ‚Äî Game Elstar</title>
  <style>
    :root{--bg:#e0f7fa;--ground:#6b4f2b;--tree:#2e7d32}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,Arial}
    #gameWrap{display:flex;align-items:center;justify-content:center;height:100vh;background:linear-gradient(#cdeff6, var(--bg));}
    canvas{background:transparent;border-radius:12px;box-shadow:0 8px 30px rgba(0,0,0,0.15)}
    .ui{position:fixed;left:18px;top:18px;color:#084; font-weight:600}
    .hint{position:fixed;right:18px;top:18px;color:#055;opacity:0.85}
    .footer{position:fixed;left:18px;bottom:18px;color:#333;opacity:0.8}
  </style>
</head>
<body>
  <div id="gameWrap">
    <canvas id="c" width="900" height="320"></canvas>
    <div class="ui">Score: <span id="score">0</span></div>
    <div class="hint">Space / Tap to jump ‚Ä¢ R to restart</div>
    <div class="footer">Elstar's Monkey Jump ‚Äî lompatin pohon pisang üêíüå¥</div>
  </div><script>
// Monkey Jump ‚Äî single-file HTML5 Canvas game
// Controls: Space or click/tap to jump. R to restart.
// Simple mechanic inspired by Chrome Dino, but the player is a monkey jumping over banana trees.

const canvas = document.getElementById('c');
const ctx = canvas.getContext('2d');
const W = canvas.width, H = canvas.height;

let gravity = 0.9;
let gameSpeed = 6;
let score = 0;
let highScore = localStorage.getItem('monkey-high') || 0;
let running = true;

const groundY = H - 60;

// Monkey player
const player = {
  x: 80,
  y: groundY - 48,
  w: 48,
  h: 48,
  vy: 0,
  jumpStrength: -16,
  grounded: true,
  draw() {
    // draw simple monkey using circles + emoji face
    ctx.save();
    ctx.translate(this.x, this.y);
    // body
    ctx.fillStyle = '#a0522d';
    roundRect(ctx, 0, 10, this.w, this.h-10, 8, true, false);
    // head
    ctx.beginPath(); ctx.arc(36,6,14,0,Math.PI*2); ctx.fill();
    // face patch
    ctx.fillStyle = '#f3d6b6'; ctx.beginPath(); ctx.arc(36,8,9,0,Math.PI*2); ctx.fill();
    // eyes
    ctx.fillStyle = '#000'; ctx.fillRect(32,6,3,3); ctx.fillRect(40,6,3,3);
    // smile
    ctx.beginPath(); ctx.arc(36,12,5,0,Math.PI); ctx.strokeStyle='#6b3'; ctx.stroke();
    // tail
    ctx.strokeStyle='#a0522d'; ctx.lineWidth=4; ctx.beginPath(); ctx.moveTo(-6,20); ctx.quadraticCurveTo(-20,10,-6,4); ctx.stroke();
    ctx.restore();
  }
};

// Obstacles (banana trees)
let obstacles = [];
function spawnObstacle(){
  const h = 80 + Math.random()*40;
  const obs = {
    x: W + 40,
    w: 36,
    h: h,
    passed: false,
    draw(){
      // trunk
      ctx.fillStyle = '#6b4f2b';
      roundRect(ctx, this.x, groundY - this.h, this.w, this.h, 6, true, false);
      // leaves & bananas (stylized)
      ctx.fillStyle = '#2e7d32';
      ctx.beginPath(); ctx.ellipse(this.x+18, groundY-this.h-8, 34, 18, 0, 0, Math.PI*2); ctx.fill();
      // bananas as yellow arcs
      ctx.fillStyle = '#ffd54f';
      for(let i=0;i<3;i++){
        ctx.beginPath(); ctx.ellipse(this.x+10 + i*10, groundY-this.h-4, 6,3, -0.6 + i*0.3, 0, Math.PI*2); ctx.fill();
      }
    },
    update(){ this.x -= gameSpeed; }
  };
  obstacles.push(obs);
}

// Utility
function roundRect(ctx, x, y, w, h, r, fill, stroke){
  if (r===undefined) r=5; ctx.beginPath(); ctx.moveTo(x+r,y);
  ctx.arcTo(x+w,y,x+w,y+h,r); ctx.arcTo(x+w,y+h,x,y+h,r); ctx.arcTo(x,y+h,x,y,r); ctx.arcTo(x,y,x+w,y,r); ctx.closePath();
  if(fill) ctx.fill(); if(stroke) ctx.stroke();
}

// Input
document.addEventListener('keydown', (e)=>{
  if(e.code==='Space'){ e.preventDefault(); jump(); }
  if(e.key==='r' || e.key==='R') reset();
});
canvas.addEventListener('touchstart', (e)=>{ e.preventDefault(); jump(); });
canvas.addEventListener('mousedown', ()=> jump());

function jump(){
  if(!running) return;
  if(player.grounded){ player.vy = player.jumpStrength; player.grounded = false; }
}

// Game loop
let spawnTimer = 0;
function update(){
  if(!running) return;
  // player physics
  player.vy += gravity; player.y += player.vy;
  if(player.y + player.h >= groundY){ player.y = groundY - player.h; player.vy = 0; player.grounded = true; }

  // obstacles
  obstacles.forEach(o=> o.update());
  if(obstacles.length && obstacles[0].x + obstacles[0].w < -50) obstacles.shift();

  // spawn logic
  spawnTimer -= 1;
  if(spawnTimer <= 0){ spawnObstacle(); spawnTimer = 80 + Math.floor(Math.random()*60) - Math.floor(score/100); if(spawnTimer<40) spawnTimer = 40; }

  // collisions
  obstacles.forEach(o=>{
    if(!o.passed && o.x + o.w < player.x){ o.passed = true; score += 10; document.getElementById('score').textContent = score; }
    if(collide(player, o)){
      // game over
      running = false; endGame();
    }
  });

  // increase difficulty slowly
  if(score % 200 === 0 && score>0) gameSpeed = 6 + Math.floor(score/200);
}

function collide(p,o){
  const px = p.x, py = p.y, pw = p.w, ph = p.h;
  const ox = o.x, oy = groundY - o.h, ow = o.w, oh = o.h;
  return px < ox+ow && px+pw > ox && py < oy+oh && py+ph > oy;
}

function draw(){
  // clear
  ctx.clearRect(0,0,W,H);

  // background sky gradient
  const g = ctx.createLinearGradient(0,0,0,H);
  g.addColorStop(0,'#cdeff6'); g.addColorStop(1,'#e8f8ff');
  ctx.fillStyle = g; ctx.fillRect(0,0,W,H);

  // sun
  ctx.fillStyle = '#fff59d'; ctx.beginPath(); ctx.arc(W-80,60,34,0,Math.PI*2); ctx.fill();

  // ground
  ctx.fillStyle = '#7c5a2b'; ctx.fillRect(0, groundY, W, H-groundY);
  ctx.fillStyle = '#5a3f20'; ctx.fillRect(0, groundY+26, W, 8);

  // obstacles
  obstacles.forEach(o=> o.draw());

  // player
  player.draw();

  // score + highscore
  ctx.fillStyle = '#045'; ctx.font='16px system-ui'; ctx.fillText('High: ' + highScore, 16, 22);
}

function loop(){ update(); draw(); if(running) requestAnimationFrame(loop); }

function endGame(){
  // show game over overlay
  ctx.fillStyle = 'rgba(0,0,0,0.35)'; ctx.fillRect(0,0,W,H);
  ctx.fillStyle = '#fff'; ctx.font = '28px system-ui'; ctx.textAlign='center'; ctx.fillText('Game Over', W/2, H/2 - 10);
  ctx.font='16px system-ui'; ctx.fillText('Tekan R untuk coba lagi', W/2, H/2 + 18);
  // store high score
  if(score > highScore){ highScore = score; localStorage.setItem('monkey-high', highScore); }
}

function reset(){
  obstacles = []; score = 0; document.getElementById('score').textContent = 0;
  running = true; player.y = groundY - player.h; player.vy = 0; player.grounded = true; gameSpeed = 6; spawnTimer = 40;
  loop();
}

// start
spawnTimer = 40; loop();

// simple collision test visuals
function debug(){ /* left for future */ }

// small helper to keep canvas crisp on high-dpi screens
(function fixDPI(){
  const dpr = window.devicePixelRatio || 1;
  canvas.width = W * dpr; canvas.height = H * dpr; canvas.style.width = W + 'px'; canvas.style.height = H + 'px'; ctx.scale(dpr,dpr);
})();

</script></body>
</html>
