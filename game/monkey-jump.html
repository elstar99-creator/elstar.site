<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Monkey Jump ‚Äì Elstar</title>

<style>
    body{
        margin:0;
        overflow:hidden;
        background:#cdeff6;
        font-family:system-ui;
        touch-action:manipulation;
    }

    #game{
        position:absolute;
        inset:0;
        margin:auto;
        display:block;
        background:transparent;
        touch-action:none;
    }

    #uiScore{
        position:absolute;
        left:15px;
        top:15px;
        font-size:20px;
        font-weight:600;
        color:#046;
        z-index:10;
    }

    #uiHint{
        position:absolute;
        right:15px;
        top:15px;
        font-size:16px;
        color:#055;
        opacity:.85;
        z-index:10;
    }

    #startBtn{
        position:absolute;
        left:50%;
        top:60%;
        transform:translateX(-50%);
        background:#03a884;
        color:white;
        padding:18px 34px;
        border-radius:16px;
        font-size:24px;
        font-weight:600;
        cursor:pointer;
        border:0;
        display:block;
        z-index:20;
        box-shadow:0 8px 30px rgba(0,0,0,0.25);
    }
</style>
</head>

<body>

<canvas id="game"></canvas>

<div id="uiScore">Score: <span id="score">0</span></div>
<div id="uiHint">Tap / Space jump</div>
<button id="startBtn">START GAME üêí</button>

<script>
// CANVAS
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

function resize(){
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
}
resize();
window.onresize = resize;

// GAME VARIABLES
let score = 0;
let running = false;
let obstacles = [];
let gravity = 1;
let jumpPower = -22;
let groundH = 120;

// PLAYER ‚Äì dibuat LEBIH BESAR
const player = {
    x: 80,
    y: 0,
    w: 95,
    h: 95,
    vy: 0,
    draw(){
    // BAYANGAN
    ctx.fillStyle = "rgba(0,0,0,0.15)";
    ctx.beginPath();
    ctx.ellipse(this.x+this.w/2, this.y+this.h+10, 30, 10, 0, 0, Math.PI*2);
    ctx.fill();

    // BADAN
    ctx.fillStyle = "#b07443";
    ctx.beginPath();
    ctx.ellipse(this.x+38, this.y+55, 30, 40, 0, 0, Math.PI*2);
    ctx.fill();

    // KEPALA
    ctx.fillStyle="#b07443";
    ctx.beginPath();
    ctx.arc(this.x+38, this.y+30, 32, 0, Math.PI*2);
    ctx.fill();

    // WAJAH
    ctx.fillStyle="#f4d7bd";
    ctx.beginPath();
    ctx.arc(this.x+38, this.y+32, 25, 0, Math.PI*2);
    ctx.fill();

    // TELINGA
    ctx.fillStyle="#b07443";
    ctx.beginPath(); ctx.arc(this.x+10, this.y+32, 12, 0, Math.PI*2); ctx.fill();
    ctx.beginPath(); ctx.arc(this.x+66, this.y+32, 12, 0, Math.PI*2); ctx.fill();

    // MATA
    ctx.fillStyle="#000";
    ctx.beginPath(); ctx.arc(this.x+28, this.y+30, 5, 0, Math.PI*2); ctx.fill();
    ctx.beginPath(); ctx.arc(this.x+48, this.y+30, 5, 0, Math.PI*2); ctx.fill();

    // HIDUNG
    ctx.fillStyle="#000";
    ctx.beginPath();
    ctx.arc(this.x+38, this.y+42, 3, 0, Math.PI*2);
    ctx.fill();

    // MULUT
    ctx.strokeStyle="#000";
    ctx.lineWidth=2;
    ctx.beginPath();
    ctx.arc(this.x+38, this.y+45, 6, 0, Math.PI);
    ctx.stroke();

    // EKOR
    ctx.strokeStyle="#b07443";
    ctx.lineWidth = 10;
    ctx.beginPath();
    ctx.arc(this.x-10, this.y+60, 40, 0.3, 1.5*Math.PI);
    ctx.stroke();
    }

// OBSTACLE ‚Äì pohon DIPENDEKIN
class Ob{
    constructor(x){
        this.x = x;
        this.w = 45;
        this.h = 42; // pendek
        this.passed = false;
    }
    draw(){
        let baseY = canvas.height - groundH;

        // batang
        ctx.fillStyle="#5b3a17";
        ctx.fillRect(this.x, baseY - this.h, this.w, this.h);

        // daun
        ctx.fillStyle="#2e7d32";
        ctx.beginPath();
        ctx.ellipse(this.x+22, baseY - this.h, 38, 20, 0, 0, Math.PI*2);
        ctx.fill();
    }
}

// START GAME
document.getElementById("startBtn").onclick = ()=>{
    score = 0;
    document.getElementById("score").textContent = score;

    player.y = canvas.height - groundH - player.h;
    player.vy = 0;

    obstacles = [];
    running = true;

    document.getElementById("startBtn").style.display="none";
    loop();
};

// LOOP
let spawnTimer = 0;

function loop(){
    if(!running) return;

    update();
    draw();
    requestAnimationFrame(loop);
}

function update(){
    // gravity
    player.vy += gravity;
    player.y += player.vy;

    let limitY = canvas.height - groundH - player.h;
    if(player.y > limitY){
        player.y = limitY;
        player.vy = 0;
    }

    // spawn pelan
    spawnTimer--;
    if(spawnTimer <= 0){
        obstacles.push(new Ob(canvas.width));
        spawnTimer = 150; // lebih lambat
    }

    // gerak obstacle LEBIH LAMBAT
    obstacles.forEach(o=>{
        o.x -= 3.0; // <‚Äî pelan banget, nyaman

        if(!o.passed && o.x + o.w < player.x){
            o.passed = true;
            score += 10;
            document.getElementById("score").textContent = score;
        }

        // collision
        let gy = canvas.height - groundH;
        if(
            player.x < o.x+o.w &&
            player.x+player.w > o.x &&
            player.y+player.h > gy - o.h
        ){
            endGame();
        }
    });

    obstacles = obstacles.filter(o=>o.x > -60);
}

// DRAW
function draw(){
    ctx.fillStyle="#cdeff6";
    ctx.fillRect(0,0,canvas.width,canvas.height);

    ctx.fillStyle="#7c5a2b";
    ctx.fillRect(0,canvas.height-groundH,canvas.width,groundH);

    obstacles.forEach(o=>o.draw());
    player.draw();
}

// GAME OVER
function endGame(){
    running=false;

    ctx.fillStyle="rgba(0,0,0,0.35)";
    ctx.fillRect(0,0,canvas.width,canvas.height);

    ctx.fillStyle="#fff";
    ctx.font="30px system-ui";
    ctx.textAlign="center";
    ctx.fillText("GAME OVER", canvas.width/2, canvas.height/2);

    document.getElementById("startBtn").style.display="block";
}

// INPUT
window.onclick = ()=>{ if(running) jump(); };
window.ontouchstart = ()=>{ if(running) jump(); };
window.onkeydown = (e)=>{ if(e.code==="Space" && running) jump(); };

function jump(){
    if(player.vy === 0){
        player.vy = jumpPower;
    }
}
</script>

</body>
  </html>
